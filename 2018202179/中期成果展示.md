## 大作业中期成果展示

## 一、小车的组装

#### 1、左右电机的安装和固定以及万向轮的安装固定

![1604069506371](C:\Users\MACHENIKE\AppData\Roaming\Typora\typora-user-images\1604069506371.png)

![1604069523538](C:\Users\MACHENIKE\AppData\Roaming\Typora\typora-user-images\1604069523538.png)

#### 2、电池的固定

![1604069556995](C:\Users\MACHENIKE\AppData\Roaming\Typora\typora-user-images\1604069556995.png)

#### 3、底板上两组红外传感器的测试（循迹和避障）

底板前端的四个绿色指示灯是左右避障和左右循迹指示灯，接通电源

其中右侧两个指示灯为循迹指示灯，主要探测下方红外信号，当插入电池，打开电源开关，将小车放置到桌面上两个循迹指示灯就亮了，而放置黑色物体遮挡时，指示灯则不亮

![1604069616306](C:\Users\MACHENIKE\AppData\Roaming\Typora\typora-user-images\1604069616306.png)

![1604069625978](C:\Users\MACHENIKE\AppData\Roaming\Typora\typora-user-images\1604069625978.png)

左侧两个指示灯为避障指示灯，主要探测左右前方的红外信号，当插入电池，打开电源开关，用物体遮挡左前方，左灯亮，用物体遮挡右前方，右灯亮，同样道理，用黑色物体遮挡，两灯都不亮

![1604069649552](C:\Users\MACHENIKE\AppData\Roaming\Typora\typora-user-images\1604069649552.png)

![1604069665659](C:\Users\MACHENIKE\AppData\Roaming\Typora\typora-user-images\1604069665659.png)

![1604069678554](C:\Users\MACHENIKE\AppData\Roaming\Typora\typora-user-images\1604069678554.png)

#### 4、主板的安装和固定，基本线路的连接

​     线路的连接涉及到底板和主板电路结构，在连接线路的时候，对于底板和主板的电路结构逐渐的展开了解  

![1604069728834](C:\Users\MACHENIKE\AppData\Roaming\Typora\typora-user-images\1604069728834.png)

![1604069738455](C:\Users\MACHENIKE\AppData\Roaming\Typora\typora-user-images\1604069738455.png)

#### 5、舵机及超声模块的安装

舵机和超声模块：

![1604069821090](C:\Users\MACHENIKE\AppData\Roaming\Typora\typora-user-images\1604069821090.png)

![1604069835103](C:\Users\MACHENIKE\AppData\Roaming\Typora\typora-user-images\1604069835103.png)

安装完成的舵机和超声探头：

![1604069857414](C:\Users\MACHENIKE\AppData\Roaming\Typora\typora-user-images\1604069857414.png)

## 二、小车的前进和转向的实现

**线路和变量相关联，通过变量的变化，实现电机的高低电平的转换，进而改变电机旋转的方向。**

**通过组合电机的是否旋转，旋转方向，旋转速度，来实现具体的小车运动。**

#### 1、前进和后退

前进的函数接口：

```
void run(int time)     // 前进
{
  digitalWrite(Right_motor_go,HIGH);  // 右电机前进
  digitalWrite(Right_motor_back,LOW);     
  analogWrite(Right_motor_go,200);//PWM比例0~255调速，左右轮差异略增减
  analogWrite(Right_motor_back,0);
  digitalWrite(Left_motor_go,LOW);  // 左电机前进
  digitalWrite(Left_motor_back,HIGH);
  analogWrite(Left_motor_go,0);//PWM比例0~255调速，左右轮差异略增减
  analogWrite(Left_motor_back,200);
  delay(time * 100);   //执行时间，可以调整  
}
```

后退的函数接口：

`void back(int time)          //后退
{
  digitalWrite(Right_motor_go,LOW);  //右轮后退
  digitalWrite(Right_motor_back,HIGH);
  analogWrite(Right_motor_go,0);
  analogWrite(Right_motor_back,150);//PWM比例0~255调速
  digitalWrite(Left_motor_go,HIGH);  //左轮后退
  digitalWrite(Left_motor_back,LOW);
  analogWrite(Left_motor_go,150);
  analogWrite(Left_motor_back,0);//PWM比例0~255调速
  delay(time * 100);     //执行时间，可以调整  
}`

#### 2、左右转向

左转的函数接口：

```
void left(int time)         //左转(左轮不动，右轮前进)
{
  digitalWrite(Right_motor_go,HIGH);	// 右电机前进
  digitalWrite(Right_motor_back,LOW);
  analogWrite(Right_motor_go,200); 
  analogWrite(Right_motor_back,0);//PWM比例0~255调速
  digitalWrite(Left_motor_go,LOW);   //左轮不动
  digitalWrite(Left_motor_back,LOW);
  analogWrite(Left_motor_go,0); 
  analogWrite(Left_motor_back,0);//PWM比例0~255调速
  delay(time * 100);	//执行时间，可以调整  
}

void spin_left(int time)         //左转(左轮后退，右轮前进)
{
  digitalWrite(Right_motor_go,HIGH);	// 右电机前进
  digitalWrite(Right_motor_back,LOW);
  analogWrite(Right_motor_go,200); 
  analogWrite(Right_motor_back,0);//PWM比例0~255调速
  digitalWrite(Left_motor_go,HIGH);   //左轮后退
  digitalWrite(Left_motor_back,LOW);
  analogWrite(Left_motor_go,200); 
  analogWrite(Left_motor_back,0);//PWM比例0~255调速
  delay(time * 100);	//执行时间，可以调整  
}
```



右转的函数接口：

```
void right(int time)        //右转(右轮不动，左轮前进)
{
  digitalWrite(Right_motor_go,LOW);   //右电机不动
  digitalWrite(Right_motor_back,LOW);
  analogWrite(Right_motor_go,0); 
  analogWrite(Right_motor_back,0);//PWM比例0~255调速
  digitalWrite(Left_motor_go,LOW);//左电机前进
  digitalWrite(Left_motor_back,HIGH);
  analogWrite(Left_motor_go,0); 
  analogWrite(Left_motor_back,200);//PWM比例0~255调速
  delay(time * 100);	//执行时间，可以调整  
}

void spin_right(int time)        //右转(右轮后退，左轮前进)
{
  digitalWrite(Right_motor_go,LOW);   //右电机后退
  digitalWrite(Right_motor_back,HIGH);
  analogWrite(Right_motor_go,0); 
  analogWrite(Right_motor_back,200);//PWM比例0~255调速
  digitalWrite(Left_motor_go,LOW);//左电机前进
  digitalWrite(Left_motor_back,HIGH);
  analogWrite(Left_motor_go,0); 
  analogWrite(Left_motor_back,200);//PWM比例0~255调速
  delay(time * 100);	//执行时间，可以调整  
}
```

#### 3、停车

刹车的函数接口：

`void brake(int time)         //刹车，停车
{
  digitalWrite(Right_motor_go,LOW);
  digitalWrite(Right_motor_back,LOW);
  digitalWrite(Left_motor_go,LOW);
  digitalWrite(Left_motor_back,LOW);
  delay(time * 100);//执行时间，可以调整  
}`

